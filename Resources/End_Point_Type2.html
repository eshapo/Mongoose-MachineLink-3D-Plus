<!doctype html>
<html class="no-js" lang="en">
<!--
  Common include to check the session is current and if not redirect to the
  login page, then after logging in redirect back to the referring page.
  Note a redirect on a non-root user can be effected by defining the
  pre-processor symbol "CHECK_ROOT_USER" before including this file.
-->
<!-- <%
// Check the session, if timed out redirect, and pass the referring page as
// an argument. This allows index.html to redirect back to the referring page.
useSession();
if (
    request["SESSION_ID"] != session["sessionid"]) {
  redirect('/index.html?src=' + request["SCRIPT_NAME"]);
  exit(403);
}
%> -->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>End point type2 (TCP Server)</title>

<script>
(function() {
 var html = document.documentElement;
 html.className = html.className.replace('no-js','') + ' js';
})();
var modules = [];
</script>
<!--[if lt IE 9]>
<script src="vdf-lib/js/lib/selectivizr.min.js"></script>
<script src="js/libs/html5-shiv.min.js"></script>
<noscript>
 <link rel="stylesheet" href="vdf-lib/css/ie/ie.min.css">
</noscript>
<![endif]-->
<!--[if IE 6]>
<link rel="stylesheet" href="css/ie6.css">
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" href="css/ie7.css">
<![endif]-->
<!--[if lte IE 7]>
<link rel="stylesheet" href="css/ie6-ie7.css">
<![endif]-->
<link rel="stylesheet" href="vdf-lib/css/main.min.css?2.0.18.9">
<link rel="stylesheet" href="css/style.css?2.0.18.9">
<link rel="stylesheet" href="css/jquery-ui.css">
<link rel="shortcun icon" type="image/x-icon" href="favicon.ico">
</head>
<!--[if IE 6]>
 <body class="ie ie6">
<![endif]-->
<!--[if IE 7]>
 <body class="ie ie7">
<![endif]-->
<!--[if IE 8]>
 <body class="ie ie8">
<![endif]-->
<!--[if IE 9]>
 <body class="ie ie9">
<![endif]-->
<!--[if gt IE 9]>
 <body>
<![endif]-->
<!--[if !IE]><!-->
<body>
<!--<![endif]-->
<script src="js/jquery.min.js?2.0.18.9" type="text/javascript"></script>
<script src="js/jquery.validate.min.js?2.0.18.9" type="text/javascript" charset="utf-8"></script>
<script src="js/script.js?2.0.18.9"></script>
<script src="vdf-lib/js/main.min.js?2.0.18.9"></script>
<!--**********************************************************-->
<script type="text/javascript" src="lang/b28n.js?2.0.18.9"></script>
<script language="JavaScript" src="js/jquery.blockUI.js"></script>
<script src="js/jquery-ui.js"></script>
<script src="js/jquery.ui.touch-punch.min.js"></script>
<script type="text/javascript" src="util.js?2.0.18.9"></script>
<script language='javascript'>
var fn="End_Point_Type2.html".replace(".html", "");
if(fn=="" || fn=="/") {
 fn="index";
}
Butterlate.setTextDomain(fn.replace("/", ""));
$.blockUI.defaults.css.padding="20px 0 20px 0";
var roam_simcard="0";
if(!is_touch_device()) {$("head").append("<style type='text/css'>.footer {position:fixed;}</style>");}
</script>
<script language="JavaScript" src="cgi-bin/end_points.cgi?getList"></script>
<script language="JavaScript">
var EP_Name="";
function submitForm() {
/*********for vdf validator**********/
 if(!$("#form").valid()) {
  return;
 }
 blockUI_wait("Please wait");
 for (var i=0; i<endpoints.length;i++) {
  if(endpoints[i].name==EP_Name) {
   break;
  }
 }
 $("#keepalive").val($("input:radio[name=keepalive-enable]:checked").val());
 rdbCmd="/cgi-bin/rdb.cgi?service.dsm.ep.conf."+i+".name="+EP_Name+" -p&service.dsm.ep.conf."+i+".type=2 -p&";
 pf="service.dsm.ep.conf."+EP_Name+".";
 rdbCmd+=pf+"port_number="+$("#portnumber").val()+" -p&" +pf+"keep_alive="+$("#keepalive").val()+" -p&" +pf+"keepcnt="+$("#keepcnt").val()+" -p&" +pf+"keepidle="+$("#keepidle").val()+" -p&" +pf+"keepintvl="+$("#keepintvl").val()+" -p&" +pf+"max_children="+$("#maxchildren").val()+" -p&service.dsm.trigger=1";
 $.get(rdbCmd, function(){setTimeout("window.location='/end_points.html?success'", 3000)});
}
$(document).ready(function() {
 $("#portnumber").val("");
 $("#keepalive").val("");
 $("#keepcnt").val("");
 $("#keepidle").val("");
 $("#keepintvl").val("");
 $("#maxchildren").val("");
 load_value_to_element($("input:radio[name=keepalive-enable]"), $("#keepalive").val()=="1");
 $("input:radio.access[name=keepalive-enable]").change(function() {
  en=$("#keepalive-enable-0").is(":checked");
  $("#keepalive-div").css("display",en?"":"none");
 });
 $("input:radio.access[name=keepalive-enable]").trigger("change");
});
</script>
<div class="header-wrap" id="main-menu"><!--Top Menu--></div>
<div id="content" class="site-content">
<div class="container">
 <aside class="grid-3 alpha sidemenu" id="side-menu"><!--Side Menu--></aside>
 <div class="grid-9 omega">
  <form name="form" id="form" class="validate" novalidate method="POST" action="End_Point_Type2.html">
  <div class="right-column white-box">
   <input type="hidden" name="keepalive" id="keepalive" value="">
   
   <script language="javascript">
    var rhyan_url=window.location.href;
 var rhyan_search=rhyan_url.search("html?");
 var rhyan_length=rhyan_url.length;
 var EP_Name=rhyan_url.slice(rhyan_search+5,rhyan_length);
   </script>
   
   <h2><script language=Javascript>document.write("TCP server"+"  "+"endpoint"+"   ("+EP_Name+")")</script></h2>
   <div class="grey-box">
    <div class="form-row">
     <label for="portnumber"><script language=Javascript>document.write("Port number")</script></label>
     <div class="field">
      <input type="text" name="portnumber" id="portnumber" class="large required validate[required, funcCall[validate_field1and65535]]" onKeyUp='NumfieldEntry(this)' value="">
      <span class="normal-text">&nbsp;<script language=Javascript>document.write(_("1-65535"))</script></span>
     </div>
    </div>
    <div class="form-row no-bg-form">
     <label for="keepalive"><script language=Javascript>document.write("Keepalive")</script></label>
     <div class="field">
      <div class="location-settings">
       <div class="radio-switch">
        <input type="radio" id="keepalive-enable-0" name="keepalive-enable" class="access" value=1>
        <label for="keepalive-enable-0" class="on"><script language=Javascript>document.write("I")</script></label>
        <input type="radio" id="keepalive-enable-1" name="keepalive-enable" class="access" value=0>
        <label for="keepalive-enable-1" class="off"><script language=Javascript>document.write("0")</script></label>
       </div>
      </div>
     </div>
    </div>
    <div id="keepalive-div">
     <div class="form-row">
      <label for="keepcnt"><script language=Javascript>document.write("Keepalive count")</script></label>
      <div class="field">
       <input type="text" name="keepcnt" id="keepcnt" class="large required validate[required, funcCall[validate_field1and50]]" onKeyUp='NumfieldEntry(this)' value="">
       <span class="normal-text">&nbsp;<script language=Javascript>document.write(_("1-50"))</script></span>
      </div>
     </div>
     <div class="form-row">
      <label for="keepidle"><script language=Javascript>document.write("Keepalive idle")</script></label>
      <div class="field">
       <input type="text" name="keepidle" id="keepidle" class="large required validate[required,funcCall[validate_field1and10000]]" onKeyUp='NumfieldEntry(this)' value="">
       <span class="normal-text">&nbsp;<script language=Javascript>document.write(_("1-10000")+"&nbsp;&nbsp;"+"seconds")</script></span>
      </div>
     </div>
     <div class="form-row">
      <label for="keepintvl"><script language=Javascript>document.write("Keepalive interval")</script></label>
      <div class="field">
       <input type="text" name="keepintvl" id="keepintvl" class="large required validate[required,funcCall[validate_field1and1000]]" onKeyUp='NumfieldEntry(this)' value="">
       <span class="normal-text">&nbsp;<script language=Javascript>document.write(_("1-1000")+"&nbsp;&nbsp;"+"seconds")</script></span>
      </div>
     </div>
    </div>
    <div class="form-row">
     <label for="maxchildren"><script language=Javascript>document.write("Max clients")</script></label>
     <div class="field">
      <input type="text" name="maxchildren" id="maxchildren" class="large required validate[required,funcCall[validate_field1and20]]" onKeyUp='NumfieldEntry(this)' value="">
      <span class="normal-text">&nbsp;<script language=Javascript>document.write(_("1-20"))</script></span>
     </div>
    </div>
   </div>
   <div class="submit-row" id="submit-div">
    <button type="button" onClick="window.location='end_points.html'"><script language=Javascript>document.write("Save")</script></button>
    <button type="button" class="secondary" onClick="window.location='end_points.html'"><script language=Javascript>document.write("Cancel")</script></button>
   </div>
  </div>
  </form>
 </div>
</div>
</div>
<footer class="footer">
 <div class="container">
  <p class="copy-right"><script language=Javascript>document.write("Powered by NetComm Wireless Limited")</script></p>
 </div>
</footer>
<script language='javascript'>
set_menu("Services", "EDP", "root");
function validate_field1and65535(field) {
 if( field.val() < 1 || field.val() > 65535 ) {
  return "Please specify a value between 1 and 65535";
 }
}
function validate_field1and20(field) {
 if( field.val() < 1 || field.val() > 20 ) {
  return "Please specify a value between 1 and 20";
 }
}
function validate_field1and50(field) {
 if( field.val() < 1 || field.val() > 50 ) {
  return "Please specify a value between 1 and 50";
 }
}
function validate_field1and1000(field) {
 if( field.val() < 1 || field.val() > 1000 ) {
  return "Please specify a value between 1 and 1000";
 }
}
function validate_field1and10000(field) {
 if( field.val() < 1 || field.val() > 10000 ) {
  return "Please specify a value between 1 and 10000";
 }
}
</script>
</body>
</html>
