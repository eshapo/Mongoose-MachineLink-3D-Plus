<!doctype html>
<html class="no-js" lang="en">
<!--
  Common include to check the session is current and if not redirect to the
  login page, then after logging in redirect back to the referring page.
  Note a redirect on a non-root user can be effected by defining the
  pre-processor symbol "CHECK_ROOT_USER" before including this file.
-->
<!-- <%
// Check the session, if timed out redirect, and pass the referring page as
// an argument. This allows index.html to redirect back to the referring page.
useSession();
if (
    request["SESSION_ID"] != session["sessionid"]) {
  redirect('/index.html?src=' + request["SCRIPT_NAME"]);
  exit(403);
}
%> -->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Modem Emulator</title>

<script>
(function() {
 var html = document.documentElement;
 html.className = html.className.replace('no-js','') + ' js';
})();
var modules = [];
</script>
<!--[if lt IE 9]>
<script src="vdf-lib/js/lib/selectivizr.min.js"></script>
<script src="js/libs/html5-shiv.min.js"></script>
<noscript>
 <link rel="stylesheet" href="vdf-lib/css/ie/ie.min.css">
</noscript>
<![endif]-->
<!--[if IE 6]>
<link rel="stylesheet" href="css/ie6.css">
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" href="css/ie7.css">
<![endif]-->
<!--[if lte IE 7]>
<link rel="stylesheet" href="css/ie6-ie7.css">
<![endif]-->
<link rel="stylesheet" href="vdf-lib/css/main.min.css?2.0.18.9">
<link rel="stylesheet" href="css/style.css?2.0.18.9">
<link rel="stylesheet" href="css/jquery-ui.css">
<link rel="shortcun icon" type="image/x-icon" href="favicon.ico">
</head>
<!--[if IE 6]>
 <body class="ie ie6">
<![endif]-->
<!--[if IE 7]>
 <body class="ie ie7">
<![endif]-->
<!--[if IE 8]>
 <body class="ie ie8">
<![endif]-->
<!--[if IE 9]>
 <body class="ie ie9">
<![endif]-->
<!--[if gt IE 9]>
 <body>
<![endif]-->
<!--[if !IE]><!-->
<body>
<!--<![endif]-->
<script src="js/jquery.min.js?2.0.18.9" type="text/javascript"></script>
<script src="js/jquery.validate.min.js?2.0.18.9" type="text/javascript" charset="utf-8"></script>
<script src="js/script.js?2.0.18.9"></script>
<script src="vdf-lib/js/main.min.js?2.0.18.9"></script>
<!--**********************************************************-->
<script type="text/javascript" src="lang/b28n.js?2.0.18.9"></script>
<script language="JavaScript" src="js/jquery.blockUI.js"></script>
<script src="js/jquery-ui.js"></script>
<script src="js/jquery.ui.touch-punch.min.js"></script>
<script type="text/javascript" src="util.js?2.0.18.9"></script>
<script language='javascript'>
var fn="v250.html".replace(".html", "");
if(fn=="" || fn=="/") {
 fn="index";
}
Butterlate.setTextDomain(fn.replace("/", ""));
$.blockUI.defaults.css.padding="20px 0 20px 0";
var roam_simcard="0";
if(!is_touch_device()) {$("head").append("<style type='text/css'>.footer {position:fixed;}</style>");}
</script>
<!--<script language="JavaScript" src="cgi-bin/ajax.cgi?getProfiles"></script>
<script language="JavaScript" src="cgi-bin/end_points.cgi?serialList"></script>-->
<script language="javascript">
var host_if_list={"sys.hw.class.serial.3.name":"platform","sys.hw.class.serial.4.name":"disabled gadget-tty-80080000.usb"}; 
var stpf=[{ "name":"Profile1", "conntype":"","enable":"1", "profilenum":"1", "dialnum":"atd*99#", "user":"","pass":"","routes":"","snat":"1", "metric":"20", "userpeerdns":"1", "readonly":"0", "reconnect_delay":"30", "reconnect_retries":"0", "authtype":"chap", "padmode":"tcp","port":"0","host":"0.0.0.0","pad_o":"0","connection_op":"1","tcp_nodelay":"0","autoapn":"1", "preferredIPEnable":"","preferredIPAddr":"","APNName":"" },{ "name":"Profile2", "conntype":"","enable":"0", "profilenum":"2", "dialnum":"atd*99#", "user":"","pass":"","routes":"","snat":"1", "metric":"20", "userpeerdns":"1", "readonly":"0", "reconnect_delay":"30", "reconnect_retries":"0", "authtype":"chap", "padmode":"tcp","port":"0","host":"0.0.0.0","pad_o":"0","connection_op":"1","tcp_nodelay":"0","autoapn":"0", "preferredIPEnable":"","preferredIPAddr":"","APNName":"" },{ "name":"Profile3", "conntype":"","enable":"0", "profilenum":"3", "dialnum":"atd*99#", "user":"","pass":"","routes":"","snat":"1", "metric":"20", "userpeerdns":"1", "readonly":"0", "reconnect_delay":"30", "reconnect_retries":"0", "authtype":"chap", "padmode":"tcp","port":"0","host":"0.0.0.0","pad_o":"0","connection_op":"1","tcp_nodelay":"0","autoapn":"0", "preferredIPEnable":"","preferredIPAddr":"","APNName":"" },{ "name":"Profile4", "conntype":"","enable":"0", "profilenum":"4", "dialnum":"atd*99#", "user":"","pass":"","routes":"","snat":"1", "metric":"20", "userpeerdns":"1", "readonly":"0", "reconnect_delay":"30", "reconnect_retries":"0", "authtype":"chap", "padmode":"tcp","port":"0","host":"0.0.0.0","pad_o":"0","connection_op":"1","tcp_nodelay":"0","autoapn":"0", "preferredIPEnable":"","preferredIPAddr":"","APNName":"" },{ "name":"Profile5", "conntype":"","enable":"0", "profilenum":"5", "dialnum":"atd*99#", "user":"","pass":"","routes":"","snat":"1", "metric":"20", "userpeerdns":"1", "readonly":"0", "reconnect_delay":"30", "reconnect_retries":"0", "authtype":"chap", "padmode":"tcp","port":"0","host":"0.0.0.0","pad_o":"0","connection_op":"1","tcp_nodelay":"0","autoapn":"0", "preferredIPEnable":"","preferredIPAddr":"","APNName":"" },{ "name":"Profile6", "conntype":"","enable":"0", "profilenum":"6", "dialnum":"atd*99#", "user":"","pass":"","routes":"","snat":"1", "metric":"20", "userpeerdns":"1", "readonly":"0", "reconnect_delay":"30", "reconnect_retries":"0", "authtype":"chap", "padmode":"tcp","port":"0","host":"0.0.0.0","pad_o":"0","connection_op":"1","tcp_nodelay":"0","autoapn":"0", "preferredIPEnable":"","preferredIPAddr":"","APNName":"" }];var def_profile=1; 

</script>


<!-- <%
if (request['REQUEST_METHOD'] == "POST") {
 set_single( 'confv250.enable='+form['hidden_enable'] );
 set_single( 'confv250.Baud_rate='+form['v250baud'] );
 set_single( 'confv250.Inter_Character_Timeout='+form['v250icto'] );
 set_single( 'confv250.Ident='+form['v250id'] );
 set_single( 'confv250.ignoreStr='+form['v250ignoreStr'] );
 set_single( 'confv250.dialPort='+form['dialPort'] );
 set_single( 'confv250.opt_dtr='+form['v250dtr'] );
 set_single( 'confv250.opt_dcd='+form['v250dcd'] );
 set_single( 'confv250.opt_fc='+form['v250fc'] );
 set_single( 'confv250.opt_ri='+form['v250ri'] );
 set_single( 'confv250.modemAutoAnswer='+form['modemAutoAnswer'] );
 set_single( 'confv250.autoDialNumber='+form['autoDialNumber'] );
 i = form['profilenum'];
 set_single( 'link.profile.profilenum='+i, '-p' );
 set_single( 'link.profile.'+i+'.pad_host='+form['ppprhost'], '-p');
 set_single( 'link.profile.'+i+'.pad_mode='+form['ppppadmode'], '-p');
 set_single( 'link.profile.'+i+'.pad_encode='+form['pppport'], '-p');
 set_single( 'link.profile.'+i+'.pad_o='+form['pad_o'], '-p');
 set_single( 'admin.remote.pad_encode='+form['fw_pad_port'], '-p');
 set_single( 'link.profile.modememulator_update=1', '-p');
 esp_sleep(2000);
 redirect('/v250.html?success');
}
else { /*GET*/
 temp = get_single( 'confv250.Inter_Character_Timeout' );
 if(temp=="" || temp=="N/A") {
  temp=0;
 }
 form['v250icto'] = temp;
 form['v250id'] = get_single( 'confv250.Ident' );
 form['v250ignoreStr'] = get_single( 'confv250.ignoreStr' );
 form['autoDialNumber'] = get_single( 'confv250.autoDialNumber' );
 form['profilenum']=get_single( 'link.profile.profilenum' );
 _dialPort=get_single('confv250.dialPort');
 _v250dtr=get_single('confv250.opt_dtr');
 _v250fc=get_single('confv250.opt_fc');
 _v250dcd=get_single('confv250.opt_dcd');
 _v250ri=get_single('confv250.opt_ri');
 _modemAutoAnswer=get_single('confv250.modemAutoAnswer');
 _v250baud=get_single('confv250.Baud_rate');
 _confv250_enable=get_single( 'confv250.enable' );
 _confv250_padd_enable=get_single( 'confv250.padd_enable' );
}
%> -->
<script language="JavaScript">
var _v250dtr = "0";
function showSelectv250dtr() {
 document.write(""+
 "<select name=\"v250dtr\">"+
 "    <option value=\"0\">"+"Ignore"+"</option>"+
 "    <option value=\"1\">"+"Command"+"</option>"+
 "    <option value=\"2\">"+"Manual disconnect"+"</option>"+
 "    <option value=\"4\">"+"High AutoDial"+"</option>"+
 "    <option value=\"5\">"+"Low AutoDial"+"</option>"+
 "    <option value=\"6\">"+"Low Pass To AT Port"+"</option>"+
 "</select>");
}
var _v250fc = "0";
function showSelectv250fc() {
 document.write(""+
 "<select name=\"v250fc\" class='med'>"+
 "    <option value=\"0\">"+"Off"+"</option>"+
 "    <option value=\"34\">"+"Hardware"+"</option>"+
 "</select>");
}
var _v250dcd = "0";
function showSelectv250dcd() {
 document.write(""+
 "<select name=\"v250dcd\" class='med'>"+
 "    <option value=\"0\">"+"Always on"+"</option>"+
 "    <option value=\"1\">"+"Connect On"+"</option>"+
 "    <option value=\"2\">"+"Always Off"+"</option>"+
 "    <option value=\"3\">"+"PPP On"+"</option>"+
 "</select>");
}
var _dialPort = "";
function showSelectdialPort() {
 document.write(""+
 "<select name=\"dialPort\" class='med'>"+
 "    <option value=\"0\">"+"Dial string"+"</option>"+
 "    <option value=\"1\">"+"Profile"+"</option>"+
 "    <option value=\"2\">"+"Circuit"+"</option>"+
 "    <option value=\"3\">"+"Packet"+"</option>"+
 "</select>");
}
var _v250ri = "0";
function showSelectv250ri() {
 document.write(""+
 "<select name=\"v250ri\" class='med'>"+
 "    <option value=\"1\">"+"Incoming Ring"+"</option>"+
 "    <option value=\"0\">"+"Always on"+"</option>"+
 "    <option value=\"2\">"+"Always Off"+"</option>"+
 "</select>");
}
var _modemAutoAnswer = "0";
function showSelectmodemAutoAnswer() {
 document.write(""+
 "<select name=\"modemAutoAnswer\" class='med'>"+
 "    <option value=\"0\">"+"Off"+"</option>"+
 "    <option value=\"1\">1</option>"+
 "    <option value=\"2\">2</option>"+
 "    <option value=\"3\">3</option>"+
 "    <option value=\"4\">4</option>"+
 "    <option value=\"5\">5</option>"+
 "    <option value=\"6\">6</option>"+
 "    <option value=\"7\">7</option>"+
 "    <option value=\"8\">8</option>"+
 "    <option value=\"9\">9</option>"+
 "    <option value=\"10\">10</option>"+
 "    <option value=\"11\">11</option>"+
 "    <option value=\"12\">12</option>"+
 "</select>");
}
function showProfiles() {
 document.write("<select name=\"profiles\" id=\"profiles\">");
 for( i=0; i<stpf.length; i++ ) {
  document.write("<option value=\""+(i+1)+"\">"+stpf[i].name+"</option>");
 }
 document.write("</select>");
 $("#profiles").val($("#profilenum").val());
}
function setPad_o() {
 document.form.pad_o.value = 0;
 if(document.form.serprot[0].checked==true) {
  document.form.pad_o.value = 16;
 }
 if(document.form.pppauto[0].checked==true) {
  document.form.pad_o.value |= 128;
 }
}
function submitF() {
/*********for vdf validator**********/
 if(!$("#form").valid()) {
  return;
 }
 $("#hidden_enable").val($("input:radio[name=emulator-enable]:checked").val());
 blockUI_wait("Saving settings, please wait...");
 document.form.submit();
}
var _v250baud = "115200";
$(document).ready( function() {
 with ( document.forms[0] ) {
  setSelect( v250baud, _v250baud);
  setSelect( v250dtr, _v250dtr);
  setSelect( v250fc, _v250fc);
  setSelect( v250dcd, _v250dcd);
  setSelect( dialPort, _dialPort);
  setSelect( v250ri, _v250ri);
  setSelect( modemAutoAnswer, _modemAutoAnswer);
 }
 load_value_to_element($("input:radio[name=emulator-enable]"), "0"=="1");
 $("input:radio.access[name=emulator-enable]").change(function() {
  en=$("#emulator-enable-0").is(":checked");
  $("#settings-div").css("display",en?"":"none");
 });
 if(typeof(host_if_list)!="undefined") {
  $.each( host_if_list, function(val,attr) {
   if(attr=="platform") {
    if(val.indexOf("dev/")!=-1) {
     $("#serialPortName").html(val);
    }
    else {
     $.get("/cgi-bin/rdb.cgi?"+val, function(x) {
      $("#serialPortName").html(x.substring(x.indexOf("=")+1).replace(/\"|\;/g,''));
     });
    }
    return true;
   }
  });
 }
 if( "0" == "0" ) {
  $("#serialPortStatus").css("color", "GREEN");
  $("#serialPortStatus").html("No conflicts");
 }
 else {
  $("#serialPortStatus").css("color", "RED");
  $("#serialPortStatus").html("Conflicts");
 }
 $("#profiles").change(function() {
  i=parseInt($("#profiles").val()-1);
  $("#profilenum").val($("#profiles").val());
  document.form.ppprhost.value = stpf[i].host;
  document.form.pppport.value = stpf[i].port;
  if(stpf[i].padmode<1) {
   stpf[i].padmode = 1;
  }
  document.form.ppppadmode.options.selectedIndex = stpf[i].padmode-1;
  if ( 1*stpf[i].pad_o &128) {
   document.form.pppauto[0].checked = true;
  }
  else {
   document.form.pppauto[1].checked = true;
  }
  if ( 1*stpf[i].pad_o &16) {
   document.form.serprot[0].checked = true;
  }
  else {
   document.form.serprot[1].checked = true;
  }
  setPad_o();
 });
 $("#profiles").trigger("change");
 $("input:radio.access[name=emulator-enable]").trigger("change");
});
</script>
<div class="header-wrap" id="main-menu"><!--Top Menu--></div>
<div id="content" class="site-content">
 <div class="container">
 <aside class="grid-3 alpha sidemenu" id="side-menu"><!--Side Menu--></aside>
 <div class="grid-9 omega">
  <form name="form" id="form" class="content" method="POST" action="v250.html" >
  <input type="hidden" name="hidden_enable" id="hidden_enable" value="">
  <div class="right-column white-box">
   <h2><script language=Javascript>document.write("Modem emulator")</script></h2>
   <div class="form-row no-bg-form">
    <label for="emulator-enable"><script language=Javascript>document.write("Activate")</script></label>
    <div class="field">
     <div class="location-settings">
      <div class="radio-switch">
       <input type="radio" id="emulator-enable-0" name="emulator-enable" class="access" value=1>
       <label for="emulator-enable-0" class="on"><script language=Javascript>document.write("I")</script></label>
       <input type="radio" id="emulator-enable-1" name="emulator-enable" class="access" value=0>
       <label for="emulator-enable-1" class="off"><script language=Javascript>document.write("0")</script></label>
      </div>
     </div>
    </div>
   </div>
   <div class="form-row">
    <label for="serialPortName"><script language=Javascript>document.write("Serial port name")</script></label>
    <div class="field" style="margin:6px 0 0 3px;">
     <span id=serialPortName> /dev/ttyAPP4 </span>
    </div>
   </div>
   <div class="form-row">
    <label for="serialPortStatus"><script language=Javascript>document.write("Serial port status")</script></label>
    <div class="field" style="margin:6px 0 0 3px;">
     <span id="serialPortStatus"></span>
    </div>
   </div>
   <div id="settings-div">
    <h2><script language=Javascript>document.write("Modem Settings")</script></h2>
    <div class="form-row">
     <label for="v250baud"><script language=Javascript>document.write("Baud rate")</script></label>
     <div class="field">
      <select name="v250baud" class="med" size=1 >
       <option value=300>300</option>
       <option value=1200>1200</option>
       <option value=2400>2400</option>
       <option value=4800>4800</option>
       <option value=9600>9600</option>
       <option value=19200>19200</option>
       <option value=38400>38400</option>
       <option value=57600>57600</option>
       <option value=115200>115200</option>
      </select>
     </div>
    </div>
    <div class="form-row">
     <label for="v250icto"><script language=Javascript>document.write("Inter character timeout")</script></label>
     <div class="field">
      <input type=text name="v250icto" id="v250icto" class="large required validate[required,funcCall[validate_icto]]" maxLength=5 onkeyup=NumfieldEntry(this); value="50">
      <span class="normal-text">&nbsp;(0-65535) <script language=Javascript>document.write( "miliseconds")</script></span>
     </div>
    </div>
    <div class="form-row">
     <label for="v250id"><script language=Javascript>document.write("Id")</script></label>
     <div class="field">
      <input type=text name="v250id" class="large" maxLength=64 value="">
     </div>
    </div>
    <div class="form-row">
     <label for="v250ignoreStr"><script language=Javascript>document.write("Ignore string")</script></label>
     <div class="field">
      <input type=text name="v250ignoreStr" class="large" maxLength=128 value="">
     </div>
    </div>
    <br/>
    <h2><script language=Javascript>document.write("Connection settings")</script></h2>
    <div class="form-row">
     <label for="dialPort"><script language=Javascript>document.write("Connect to")</script></label>
     <div class="field">
      <script language=Javascript>showSelectdialPort();</script>
     </div>
    </div>
    <div class="form-row">
     <label for="Selectv250dtr"><script language=Javascript>document.write("DTR action")</script></label>
     <div class="field">
      <script language=Javascript>showSelectv250dtr();</script>
     </div>
    </div>
    <div class="form-row">
     <label for="Selectv250dcd"><script language=Javascript>document.write("DCD action")</script></label>
     <div class="field">
      <script language=Javascript>showSelectv250dcd();</script>
     </div>
    </div>
    <div class="form-row">
     <label for="Selectv250fc"><script language=Javascript>document.write("Flow control")</script></label>
     <div class="field">
      <script language=Javascript>showSelectv250fc();</script>
     </div>
    </div>
    <div class="form-row">
     <label for="Selectv250ri"><script language=Javascript>document.write("RI action")</script></label>
     <div class="field">
      <script language=Javascript>showSelectv250ri();</script>
     </div>
    </div>
    <div class="form-row">
     <label for="SelectmodemAutoAnswer"><script language=Javascript>document.write("Circuit auto answer rings")</script></label>
     <div class="field">
      <script language=Javascript>showSelectmodemAutoAnswer();</script>
     </div>
    </div>
    <div class="form-row">
     <label for="autoDialNumber"><script language=Javascript>document.write("Auto dial number")</script></label>
     <div class="field">
      <input type=text name="autoDialNumber" class="large" maxLength=64 value="">
     </div>
    </div>
    <br/>
    <input type="hidden" name="pad_o" id="pad_o" value="">
    <input type="hidden" name="profilenum" id="profilenum" value="">
    <h2><script language=Javascript>document.write("Profile-specific settings")</script></h2>
    <div class="form-row">
     <label for="SelectmodemAutoAnswer"><script language=Javascript>document.write("Profile")</script></label>
     <div class="field">
      <script language=Javascript>showProfiles();</script>
     </div>
    </div>
    <div class="form-row">
     <label for="ppprhost"><script language="JavaScript">document.write("Remote Host");</script></label>
     <td><input type=text name="ppprhost" class="large" size=32 maxlength=128 ></td>
    </div>
    <div class="form-row">
     <label for="pppport"><script language="JavaScript">document.write("Port");</script></label>
     <div class="field">
      <input type=text name="pppport" id="pppport" class="large required validate[required,funcCall[validate_pppPort]]" size=8 maxLength=5 onkeyup=NumfieldEntry(this);> &nbsp;( 1-65535 )
     </div>
    </div>
    <div class="form-row no-bg-form">
     <label for="serprot"><script language="JavaScript">document.write("Local encoding");</script></label>
     <div class="field">
      <div class="location-settings">
       <div class="radio-switch">
        <input type="radio" id="serprot-0" name="serprot" class="access" value="16" onclick="setPad_o()">
        <label for="serprot-0" class="on"><script language=Javascript>document.write("I")</script></label>
        <input type="radio" id="serprot-1" name="serprot" class="access" value="0" onclick="setPad_o()">
        <label for="serprot-1" class="off"><script language=Javascript>document.write("0")</script></label>
       </div>
      </div>
     </div>
    </div>
    <div class="form-row">
     <label for="ppppadmode"><script language="JavaScript">document.write("Mode");</script></label>
     <div class="field">
      <select name="ppppadmode" class="large"><option value=1>TCP</option><option value=2>UDP</option></select>
     </div>
    </div>
    <div class="form-row no-bg-form">
     <label for="pppauto"><script language="JavaScript">document.write("Auto answer");</script></label>
     <div class="field">
      <div class="location-settings">
       <div class="radio-switch">
        <input type="radio" id="pppauto-0" name="pppauto" class="access" value="128" onclick="setPad_o()">
        <label for="pppauto-0" class="on"><script language=Javascript>document.write("I")</script></label>
        <input type="radio" id="pppauto-1" name="pppauto" class="access" value="0" onclick="setPad_o()">
        <label for="pppauto-1" class="off"><script language=Javascript>document.write("0")</script></label>
       </div>
      </div>
     </div>
    </div>
   </div>
   <div class="submit-row">
    <button type="button" id="saveBtn" onClick="javascript:submitF()"><script language=Javascript>document.write("Save")</script></button>
   </div>
<!-- <p style="padding-left:150px;"><script language=Javascript>document.write("Please disable PADD configuration to use Modem configuration.")</script></p> -->
  </div>
  </form>
 </div>
</div>
</div>
<footer class="footer">
 <div class="container">
  <p class="copy-right"><script language=Javascript>document.write("Powered by Mongoose Advanced Technologies")</script></p>
 </div>
</footer>
<script language='javascript'>
        set_menu("Services", "EMU", "root");
 if(""=="success") {
  success_alert("", "");
 }
/********* vdf validator**********/
 VALIDATOR.config.errors["v250icto"]="Please specify a value between 0 and 65535";
 $.validator.addMethod("v250icto",function(c,a) {
  if(c!==$(a).attr("data-watermark")) {
   if( c < 0 || c > 65535 || !isAllNum(c) ) {
    return false;
   }
  }
  else if($(a).hasClass("required")) {
   return false;
  }
  return true;
 },VALIDATOR.config.errors.v250icto);
 VALIDATOR.config.errors["pppPort"]="Please specify a value between 1 and 65535";
 $.validator.addMethod("v250icto",function(c,a) {
  if(c!==$(a).attr("data-watermark")) {
   if( c < 0 || c > 65535 || !isAllNum(c) ) {
    return false;
   }
  }
  else if($(a).hasClass("required")) {
   return false;
  }
  return true;
 },VALIDATOR.config.errors.pppPort);
 if(""=="success") {
  success_alert("","");
 }
</script>
</body>
</html>
